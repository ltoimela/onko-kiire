(this["webpackJsonponko-kiire"]=this["webpackJsonponko-kiire"]||[]).push([[0],{25:function(t,e,n){},26:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(5),c=n.n(i),s=(n(25),n(26),n(14)),o=n.n(s),u=n(11),l=n(16),p=n(8),j=n(3),f=n(1),h=function(t){var e=t.departure;return Object(f.jsxs)("div",{children:[e.line," l\xe4htee ",e.timeToDepart," p\xe4\xe4st\xe4"]})};var d=function(t){var e,n=t.stop,r=n.stoptimesForPatterns.map((function(t,e){return function(t){var e=new Date,n=new Date;n.setHours(0),n.setMinutes(0),n.setSeconds(0);var r,a=n.getTime()/1e3,i=[],c=Object(p.a)(t.stoptimes);try{for(c.s();!(r=c.n()).done;){var s=r.value,o=a+s.realtimeArrival,u=s.realtimeArrival,l=o-e.getTime()/1e3;l<0&&(l+=86400,u+=86400);var j=Math.floor(l/60),f=Math.floor(j/60)%60;if(l%=60,j%=60,f<=1){var h=t.pattern.name,d={line:h=h.substr(0,h.indexOf(" ")),realtimeArrival:u,timeToDepart:0===f?"".concat(j,"m ").concat(l,"s"):"".concat(f,"h ").concat(j,"m ").concat(l,"s")};i.push(d)}}}catch(m){c.e(m)}finally{c.f()}return i}(t)})),a=(e=[]).concat.apply(e,Object(u.a)(r));return a.sort((function(t,e){return t.realtimeArrival<e.realtimeArrival?-1:1})),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:Object(f.jsxs)("b",{children:["Pys\xe4kki ",n.name]})}),a.map((function(t,e){return Object(f.jsx)(h,{departure:t},e)}))]})},m=n(37),v=n(20),b=["97 ","841 ","93 "],O=[{id:"U3RvcDpIU0w6MTQ3MzEyMA==",name:"Fallpakka",stoptimesForPatterns:[]},{id:"U3RvcDpIU0w6MTQ3MzE2NQ==",name:"Mellunm\xe4entie",stoptimesForPatterns:[]}],x=[{id:"U3RvcDpIU0w6MTQ1MjExMg==",name:"Rantakartanontie",stoptimesForPatterns:[]}];function y(t){if(!t.ok)throw Error(t.statusText);return t}var g=function(){var t=Object(r.useState)(O),e=Object(j.a)(t,2),n=e[0],a=e[1],i=Object(r.useState)(x),c=Object(j.a)(i,2),s=c[0],h=c[1],g=Object(r.useState)(0),k=Object(j.a)(g,2),P=k[0],F=k[1];function M(t){return new Promise((function(e,n){var r='{\n      stops(name:"'.concat(t.name,'") {\n        id\n        name\n        stoptimesForPatterns {\n          pattern {\n            name\n          }\n          stoptimes {\n            realtimeArrival\n          }\n        }\n      }\n    }');fetch("https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:r})}).then(y).then((function(t){return t.json()})).then((function(n){var r=n.data.stops;t.stoptimesForPatterns=[];var a,i=Object(p.a)(r);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(t.id===c.id){var s,o=Object(p.a)(c.stoptimesForPatterns);try{var u=function(){var e=s.value;b.find((function(t){return e.pattern.name.startsWith(t)}))&&t.stoptimesForPatterns.push(e)};for(o.s();!(s=o.n()).done;)u()}catch(l){o.e(l)}finally{o.f()}}}}catch(l){i.e(l)}finally{i.f()}e(!0)})).catch((function(t){console.log("Error performing request: ",t),n(!1)}))}))}function w(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function t(){var e,r,i,c,l,j,f,d,m;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=Object(u.a)(s),i=Object(p.a)(r);try{for(i.s();!(c=i.n()).done;)l=c.value,e.push(M(l))}catch(o){i.e(o)}finally{i.f()}j=Object(u.a)(n),f=Object(p.a)(j);try{for(f.s();!(d=f.n()).done;)m=d.value,e.push(M(m))}catch(o){f.e(o)}finally{f.f()}return t.next=9,Promise.all(e);case 9:a(j),h(r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){w(),setInterval(w,1e4)}),[]),Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("h1",{children:"Onko Kiire?"}),Object(f.jsxs)(m.a,{style:{marginLeft:"10%",marginRight:"10%",height:"400px"},activeIndex:P,onSelect:function(t,e){F(t)},children:[Object(f.jsx)(v.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Kotoa kouluun"}),n.map((function(t,e){return Object(f.jsx)(d,{stop:t},e)}))]})}),Object(f.jsx)(v.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Koululta kotiin"}),s.map((function(t,e){return Object(f.jsx)(d,{stop:t},e+1e3)}))]})})]}),Object(f.jsx)("p",{})]})};n(33);var k=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(g,{})})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),i(t),c(t)}))};c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root")),P()}},[[34,1,2]]]);
//# sourceMappingURL=main.1d30cf36.chunk.js.map